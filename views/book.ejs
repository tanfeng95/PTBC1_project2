<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <title>
    <%=result[0].book_title%>
  </title>
  <style>
    .book {
      display: flex;
      justify-content: center;
    }

    .genre {
      color: black;
      border-color: #0d6efd;
      background-color: #AEFEFF;
      display: inline-block;
      font-weight: 400;
      border: 1px solid transparent;
      padding: 0.375rem 0.75rem;
      font-size: 1rem;
      border-radius: 0.25rem;
    }

    .fixed-img {
      max-width: 100%;
      max-height: 100%;
    }

    .novel-info {
      max-width: 75%;
    }

    .add-to-library {
      display: flex;
    }

    @media only screen and (max-width: 600px) {
      .book {
        display: flex;
        flex-direction: column;
        text-align: center;
      }

      .novel-info {
        max-width: 100%;
      }

      .add-to-library {
        display: flex;
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <%- include('navBar'); -%>
      <div class='book p-2 m2'>
        <div class="fixed-img p-2 m-2">
          <img class="img-fluid" src="/<%=result[0].photo%>">
        </div>
        <div class="novel-info p-2 m-2 ">
          <div class="main-header">
            <h1 class="p-2 m-2">
              <%=result[0].book_title%>
            </h1>
            <div class="author p-2 m-2">
              <span><strong>Author:</strong>
                <%=result[0].author%>
              </span>
            </div>
            <div class="chapters p-2 m-2">
              <span><strong>Chapters:</strong>
                <%=result[0].chapters%>
              </span>
            </div>
            <div class="chapters p-2 m-2">
              <span><strong>Book Type :</strong>
                <%= result[0].type_name %>
              </span>
            </div>
            <div class="chapters p-2 m-2">
              <span class=""><strong>URL :</strong>
                <a class="btn btn-dark view-btn" href="<%= result[0].book_url %>" target="_blank">Go to website</a>
              </span>
            </div>
          </div>
          <div class="categories p-2 m-2">
            <div>
              <strong>Genres : </strong>
              <% result.forEach((item)=>{%>
                <span class='genre'>
                  <%= item.genres_name %>
                </span>
                <%}) %>
            </div>
          </div>
          <div class="add-to-library p-2 m-2">
            <div class="d-flex">
              <form action='/addToUserLibrary' method="POST" class="post-form ">
                <span><b>Add: </b></span>
                <input class="form-control" type="hidden" name='book_id' value='<%=result[0].id%>'>
                <button type="submit" class="btn btn-secondary fa fa-plus"> Add To Library</button>
              </form>
              <div class='px-2'>
                <a href="/book/<%=result[0].id%>/comment " class="btn btn-secondary view-btn fa fa-plus">Add
                  Comments</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="chapters p-3 m-3">
        <span>
          <h4>Summary:</h4>
          <hr>
          <%= result[0].summary %>
        </span>
      </div>

      <div class="chapters p-3 m-3">
        <span>
          <h4>Comments :</h4>
          <hr>
          <% for(var i=0; i<comments.length; i++) {%>
            <Span>
              Username: <%= comments[i].username %>
                <br>
                Comment : <%= comments[i].comments %>
            </Span>
            <br>
            <br>
            <% } %>
        </span>
      </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
</body>

</html>